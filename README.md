# Rmuno
（2021.12.29 やっと、Ver1.0 と言っていいものができました。）
心機一転して、Rubyを使った人工無脳っぽいものを一から作ってます。
こちらが入力した文を保存して、それを元に文章っぽいものを作成することができます。  
作成環境（xubuntu21.04→21.10、Ruby2.7、GTK3） 

## 使う前に
今回は形態素解析のためにJUMAN++を使ってますので、あらかじめインストールしておいてください。
また、`$ gem gtk3`でRubyでGTK3を使うためのライブラリをインストールしておいてください。
インストール方法及びRubyで使えるようにする方法は、すみませんがググるなどして調べてください。  

## 使い方
1. 端末でプログラムの入っているディレクトリに移動します。
1. コマンド`$ ruby gui.rb`を実行します。
1. 入力欄に適当に文章を入力します。
このとき、なるべく１つのテーマに絞って、同じ単語をたくさん使うとよいでしょう。
1. 終了は「自爆」ボタンを押します。
なお、位置を動かしたい場合は、Altキーを押しながらドラッグします。  
会話は、２種類あり、ひとつはただ聞くだけ（辞書の充実のため）、もうひとつでは、ランダムな名詞を元に文章を作成します。
今のところ無脳からの問いかけの言葉は違っていても、こちらが入力した文章に対する処理内容は全く同じです。  

## 既知の問題
- かなりの頻度で固まります。
- まれに辞書ファイル(YAMLファイル）が壊れることがあります。
- 辞書ファイルに入力した覚えのない記号が含まれ、エラーの原因になることがあります（例えば改行のある文章をそのままコピペすると発生します。）。  

## 今後の課題
- 簡単に移動できるようにする。
- 文字表示枠をもっとかわいくする。
- 表情も変えられるようにする。
- ランダムに話しかけたりするようにする（ややできている。）。
- 会話の種類を増やす。  

## その他
画像は、「三日月アルペジオ」（ http://roughsketch.en-grey.com/ ）さんから頂いたものを元にしています。  

## 中で何をやっているか
### 形態素解析
1. JUMAN++を使って、文章を分節ごとにバラバラします。JUMAN++にしたのは、定番のMecabなどより名詞をより細かく分類できるからです（例えば、後ろに「する」がつく名詞（「昼寝」とか「仕事」など）を抽出できます。）。今は活用してませんが、今後使うかもしれないので。JUMAN++は、解析に時間がかかると言われてますが、この程度のプログラムでは問題になりません。
2. 単語の中から名詞だけを取り出して、配列にし、YAML形式で名詞用辞書ファイルに保存します。
3. また、文章を作る種として、文章を６音節ずつのつながりで配列にし、YAML形式で専用ファイルに保存します。よく知られている「マルコフ連鎖」では、２音節の繋がりが使われますが、２音節だとあまりにも意味のない文章（助詞の無限連鎖とか）しか作れません。ある程度意味のありそうな文章にするために、６音節でひと組としました。  
### 会話の組み立て
使ってみると、一見、無脳が話しかけてきたことに対してこちらが何か書いて、それに対してさらに無脳が返しているように見えますが、実際には、こちらの入力＞無脳の返事＞（５秒経過）＞無脳から次の会話を話しかける、というループになっています。


